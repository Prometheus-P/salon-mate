# Review Management - 화면 정의서

**Feature**: Review Management (리뷰 관리)
**Version**: 1.0
**Created**: 2025-12-21
**Status**: Draft

---

## 1. 화면 개요

### 1.1 화면 목적
미용실 오너가 Naver, Google 등 다양한 플랫폼의 리뷰를 통합 관리하고, AI 기반 응답을 생성하여 효율적으로 고객 피드백에 대응할 수 있는 화면.

### 1.2 접근 경로
- **URL**: `/dashboard/reviews`
- **Navigation**: 사이드바 "리뷰 관리" 메뉴
- **권한**: 인증된 Shop Owner

### 1.3 화면 목록
| 화면 ID | 화면명 | URL | 설명 |
|---------|--------|-----|------|
| RV-001 | 리뷰 목록 | `/dashboard/reviews` | 전체 리뷰 목록 및 필터링 |
| RV-002 | 리뷰 상세 | `/dashboard/reviews/[id]` | 개별 리뷰 상세 및 응답 |
| RV-003 | 리뷰 분석 | `/dashboard/reviews/analytics` | 리뷰 분석 대시보드 |

---

## 2. RV-001: 리뷰 목록 화면

### 2.1 화면 구조
```
┌─────────────────────────────────────────────────────────────┐
│ 리뷰 관리                                                    │
│ 고객 리뷰를 효율적으로 관리하세요                              │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ [검색창]                    [필터] [정렬] [내보내기]     │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐       │
│ │ 전체     │ │ 미응답   │ │ 응답완료 │ │ 부정적   │       │
│ │ 1,234    │ │ 23       │ │ 1,200    │ │ 11       │       │
│ └──────────┘ └──────────┘ └──────────┘ └──────────┘       │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ □ | ★★★★★ | 김철수 | Google | 12월 20일 | 미응답      │ │
│ │   | "서비스가 정말 좋았습니다..."                        │ │
│ ├─────────────────────────────────────────────────────────┤ │
│ │ □ | ★★★★☆ | 이영희 | Naver  | 12월 19일 | 응답완료    │ │
│ │   | "헤어 스타일이 마음에 들어요..."                     │ │
│ ├─────────────────────────────────────────────────────────┤ │
│ │ ... (더 많은 리뷰)                                      │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ [< 이전] 페이지 1 / 50 [다음 >]        20개씩 보기 ▼        │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 Header Section

#### 2.2.1 Title Area
| 속성 | 값 |
|------|-----|
| 제목 | "리뷰 관리" |
| 부제 | "고객 리뷰를 효율적으로 관리하세요" |

#### 2.2.2 Action Bar
| 요소 | 타입 | 설명 |
|------|------|------|
| 검색창 | Input | 리뷰 내용, 작성자 검색 |
| 필터 버튼 | Popover | 상세 필터 옵션 |
| 정렬 드롭다운 | Select | 정렬 기준 선택 |
| 내보내기 버튼 | Button | CSV/Excel 내보내기 |

### 2.3 Filter Options

#### 2.3.1 Quick Filters (탭)
| 탭 | 필터 조건 | 카운트 표시 |
|----|-----------|-------------|
| 전체 | - | 총 리뷰 수 |
| 미응답 | status = 'pending' | 미응답 수 |
| 응답완료 | status = 'responded' | 응답 완료 수 |
| 부정적 | rating <= 3 | 3점 이하 수 |

#### 2.3.2 Advanced Filters (Popover)
| 필터 | 타입 | 옵션 |
|------|------|------|
| 플랫폼 | Checkbox Group | Google, Naver, 카카오맵 |
| 평점 | Rating Selector | 1~5점 범위 |
| 기간 | Date Range Picker | 시작일 ~ 종료일 |
| 응답 상태 | Radio | 전체, 미응답, 응답완료 |
| 키워드 | Tag Input | 포함/제외 키워드 |

#### 2.3.3 Sort Options
| 옵션 | 값 | 기본값 |
|------|-----|--------|
| 최신순 | created_at DESC | ✓ |
| 오래된순 | created_at ASC | |
| 평점 높은순 | rating DESC | |
| 평점 낮은순 | rating ASC | |

### 2.4 Review List Table

#### 2.4.1 Table Columns
| 컬럼 | 너비 | 설명 |
|------|------|------|
| 선택 | 40px | Checkbox (bulk actions) |
| 평점 | 100px | 별점 표시 |
| 작성자 | 120px | 리뷰어 이름 |
| 플랫폼 | 80px | Platform Badge |
| 작성일 | 100px | 상대 시간 or 날짜 |
| 상태 | 80px | Status Badge |
| 내용 미리보기 | flex | 리뷰 첫 줄 (truncate) |
| 액션 | 120px | Quick actions |

#### 2.4.2 Row Actions
| 액션 | 아이콘 | 설명 |
|------|--------|------|
| 상세 보기 | Eye | 리뷰 상세 페이지로 이동 |
| AI 응답 생성 | Sparkles | AI 응답 생성 (미응답인 경우) |
| 응답 작성 | Reply | 직접 응답 작성 모달 |

#### 2.4.3 Bulk Actions
| 액션 | 조건 | 설명 |
|------|------|------|
| AI 일괄 응답 생성 | 미응답 선택 시 | 선택된 리뷰에 AI 응답 일괄 생성 |
| 내보내기 | 선택 시 | 선택된 리뷰 CSV 내보내기 |
| 읽음 표시 | 선택 시 | 읽음 상태로 변경 |

### 2.5 Status Badges
| 상태 | 레이블 | 색상 |
|------|--------|------|
| pending | 미응답 | Orange (`bg-orange-100 text-orange-700`) |
| responded | 응답완료 | Green (`bg-green-100 text-green-700`) |
| draft | 응답 작성중 | Gray (`bg-gray-100 text-gray-500`) |

### 2.6 Platform Badges
| 플랫폼 | 레이블 | 색상 |
|--------|--------|------|
| google | Google | Blue (`bg-blue-100 text-blue-700`) |
| naver | Naver | Green (`bg-green-100 text-green-700`) |
| kakao | 카카오맵 | Yellow (`bg-yellow-100 text-yellow-700`) |

### 2.7 Pagination
| 속성 | 값 |
|------|-----|
| 기본 페이지 크기 | 20 |
| 페이지 크기 옵션 | 10, 20, 50, 100 |
| 표시 | "페이지 X / Y" |

### 2.8 Empty State
```
┌─────────────────────────────────────────┐
│            📝                           │
│     리뷰가 없습니다                      │
│                                         │
│  리뷰 플랫폼을 연동하면                  │
│  고객 리뷰가 자동으로 수집됩니다         │
│                                         │
│     [플랫폼 연동하기]                    │
└─────────────────────────────────────────┘
```

---

## 3. RV-002: 리뷰 상세 화면

### 3.1 화면 구조
```
┌─────────────────────────────────────────────────────────────┐
│ [← 목록으로]                                                │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────┬───────────────────┐ │
│ │ 리뷰 상세                           │ 리뷰어 정보        │ │
│ │                                     │                   │ │
│ │ ★★★★★ 5.0           [Google] 12/20 │ 김철수            │ │
│ │                                     │ Google 리뷰어     │ │
│ │ ───────────────────────────────────│ 리뷰 3개 작성      │ │
│ │                                     │                   │ │
│ │ "정말 만족스러운 서비스였습니다.    │ [프로필 보기]      │ │
│ │ 직원분들이 친절하고 실력도 좋아요.  │                   │ │
│ │ 다음에도 꼭 방문하겠습니다!"       │                   │ │
│ │                                     └───────────────────┘ │
│ │ ───────────────────────────────────────────────────────── │
│ │                                                           │
│ │ 응답 작성                                                 │
│ │ ┌───────────────────────────────────────────────────────┐ │
│ │ │ (textarea)                                            │ │
│ │ │                                                       │ │
│ │ │                                                       │ │
│ │ └───────────────────────────────────────────────────────┘ │
│ │                                                           │
│ │ [⚡ AI 응답 생성]        [임시저장]  [게시]               │
│ │                                                           │
│ │ ───────────────────────────────────────────────────────── │
│ │                                                           │
│ │ AI 응답 옵션                                              │
│ │ 톤: [친근한 ▼]  길이: [보통 ▼]  강조: [감사 ▼]           │
│ │                                                           │
│ └───────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 Review Info Section

#### 3.2.1 Header
| 요소 | 설명 |
|------|------|
| 평점 | 별점 + 숫자 (예: ★★★★★ 5.0) |
| 플랫폼 뱃지 | Google/Naver/카카오맵 |
| 작성일 | 상대 시간 (예: "2일 전") |
| 상태 뱃지 | 미응답/응답완료 |

#### 3.2.2 Content
| 요소 | 설명 |
|------|------|
| 리뷰 본문 | 전체 텍스트 |
| 이미지 | 첨부 이미지 (있는 경우) |
| 원본 링크 | 플랫폼 원본 리뷰 링크 |

### 3.3 Reviewer Info Card

| 필드 | 설명 |
|------|------|
| 이름 | 리뷰어 이름 (일부 마스킹) |
| 플랫폼 | 리뷰 출처 플랫폼 |
| 리뷰 수 | 해당 플랫폼 리뷰 작성 수 |
| 프로필 링크 | 플랫폼 프로필 (가능한 경우) |

### 3.4 Response Section

#### 3.4.1 Response Textarea
| 속성 | 값 |
|------|-----|
| Placeholder | "고객님께 감사의 마음을 전해보세요..." |
| Max Length | 1000자 |
| Character Counter | 표시 (예: "234/1000") |

#### 3.4.2 AI Response Options
| 옵션 | 값 |
|------|-----|
| 톤 (Tone) | 친근한, 공손한, 전문적인 |
| 길이 (Length) | 짧게, 보통, 길게 |
| 강조 (Emphasis) | 감사, 재방문 유도, 사과 |

#### 3.4.3 Action Buttons
| 버튼 | 타입 | 조건 | 동작 |
|------|------|------|------|
| AI 응답 생성 | Secondary | 항상 | AI 응답 생성 및 textarea 채우기 |
| 임시저장 | Outline | 내용 있을 때 | 드래프트 저장 |
| 게시 | Primary | 내용 있을 때 | 확인 Dialog → 플랫폼에 게시 |

### 3.5 Response History
```
┌─────────────────────────────────────────────────────────────┐
│ 응답 히스토리                                                │
├─────────────────────────────────────────────────────────────┤
│ 12월 20일 14:30 - 응답 게시됨                                │
│ "감사합니다! 다음에도 좋은 서비스로..."                       │
│                                                             │
│ 12월 20일 14:25 - AI 응답 생성                               │
│ "소중한 리뷰 감사드립니다..."                                 │
│                                                             │
│ 12월 20일 10:00 - 리뷰 수신                                  │
└─────────────────────────────────────────────────────────────┘
```

---

## 4. RV-003: 리뷰 분석 화면

### 4.1 화면 구조
```
┌─────────────────────────────────────────────────────────────┐
│ 리뷰 분석                               기간: [이번 달 ▼]    │
├─────────────────────────────────────────────────────────────┤
│ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐         │
│ │ 총 리뷰      │ │ 평균 평점    │ │ 응답률       │         │
│ │ 1,234        │ │ 4.7 ★        │ │ 95.2%        │         │
│ │ +12% ↑       │ │ +0.2 ↑       │ │ +5% ↑        │         │
│ └──────────────┘ └──────────────┘ └──────────────┘         │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────┐ ┌─────────────────────────┐ │
│ │ 평점 분포                    │ │ 플랫폼별 리뷰           │ │
│ │ ★★★★★ ████████████ 85%     │ │ [Pie Chart]            │ │
│ │ ★★★★☆ ████ 10%             │ │ Google: 60%            │ │
│ │ ★★★☆☆ ██ 3%                │ │ Naver: 35%             │ │
│ │ ★★☆☆☆ █ 1%                 │ │ 카카오: 5%              │ │
│ │ ★☆☆☆☆ █ 1%                 │ │                         │ │
│ └─────────────────────────────┘ └─────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 리뷰 트렌드                                              │ │
│ │ [Line Chart - 일별 리뷰 수 & 평점]                       │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────┐ ┌─────────────────────────┐ │
│ │ 자주 언급되는 키워드         │ │ 감성 분석               │ │
│ │ [Word Cloud]                │ │ 긍정: 85%               │ │
│ │ 친절 서비스 스타일 분위기    │ │ 중립: 10%               │ │
│ │ 가격 재방문 추천             │ │ 부정: 5%                │ │
│ └─────────────────────────────┘ └─────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 Summary Cards

| 카드 | 메트릭 | 비교 기준 |
|------|--------|-----------|
| 총 리뷰 | review_count | 전월 대비 |
| 평균 평점 | average_rating | 전월 대비 |
| 응답률 | response_rate | 전월 대비 |

### 4.3 Charts

#### 4.3.1 Rating Distribution (Bar Chart)
- X축: 평점 (1~5)
- Y축: 리뷰 수 / 퍼센트

#### 4.3.2 Platform Distribution (Pie Chart)
- 플랫폼별 리뷰 비율
- 클릭 시 해당 플랫폼 필터 적용

#### 4.3.3 Review Trend (Line Chart)
- X축: 날짜
- Y축 (좌): 리뷰 수
- Y축 (우): 평균 평점

### 4.4 Keyword Analysis

#### 4.4.1 Word Cloud
- 자주 언급되는 키워드 시각화
- 클릭 시 해당 키워드 포함 리뷰 필터

#### 4.4.2 Sentiment Analysis
| 감성 | 색상 | 설명 |
|------|------|------|
| 긍정 | Green | 4-5점 + 긍정 키워드 |
| 중립 | Gray | 3점 + 중립적 내용 |
| 부정 | Red | 1-2점 + 부정 키워드 |

---

## 5. API 연동

### 5.1 Endpoints

| 기능 | Method | Endpoint |
|------|--------|----------|
| 리뷰 목록 조회 | GET | `/api/v1/shops/{shopId}/reviews` |
| 리뷰 상세 조회 | GET | `/api/v1/reviews/{reviewId}` |
| AI 응답 생성 | POST | `/api/v1/reviews/{reviewId}/generate-response` |
| 응답 저장 | PUT | `/api/v1/reviews/{reviewId}/response` |
| 응답 게시 | POST | `/api/v1/reviews/{reviewId}/publish` |
| 리뷰 분석 | GET | `/api/v1/shops/{shopId}/reviews/analytics` |
| 리뷰 내보내기 | GET | `/api/v1/shops/{shopId}/reviews/export` |

### 5.2 Query Parameters (리뷰 목록)

| 파라미터 | 타입 | 설명 |
|----------|------|------|
| page | number | 페이지 번호 |
| limit | number | 페이지 크기 |
| status | string | pending, responded, draft |
| platform | string[] | google, naver, kakao |
| rating_min | number | 최소 평점 |
| rating_max | number | 최대 평점 |
| date_from | string | 시작일 (ISO8601) |
| date_to | string | 종료일 (ISO8601) |
| search | string | 검색어 |
| sort | string | 정렬 기준 |
| order | string | asc, desc |

---

## 6. 반응형 디자인

### 6.1 Breakpoints

| 화면 | 리뷰 목록 | 리뷰 상세 |
|------|-----------|-----------|
| Mobile | 카드 형태, 세로 스택 | 단일 컬럼 |
| Tablet | 테이블, 주요 컬럼만 | 2컬럼 (리뷰/리뷰어) |
| Desktop | 전체 테이블 | 2컬럼 |

### 6.2 Mobile Adaptations
- 테이블 → 카드 리스트 변환
- 필터 → 바텀 시트
- 상세 보기 → 전체 화면 모달

---

## 7. 접근성

### 7.1 Keyboard Navigation
- Tab: 리뷰 간 이동
- Enter: 리뷰 상세 열기
- Space: 체크박스 토글
- Escape: 모달/팝오버 닫기

### 7.2 Screen Reader
- 리뷰 카드에 aria-label (평점, 플랫폼, 상태 포함)
- 테이블 헤더 연결
- 상태 변경 시 aria-live 알림

---

## 8. 파일 구조

```
src/frontend/src/app/dashboard/reviews/
├── page.tsx                     # 리뷰 목록 페이지
├── [id]/
│   └── page.tsx                 # 리뷰 상세 페이지
├── analytics/
│   └── page.tsx                 # 리뷰 분석 페이지
├── components/
│   ├── ReviewList.tsx           # 리뷰 목록 테이블
│   ├── ReviewCard.tsx           # 리뷰 카드 (모바일)
│   ├── ReviewFilters.tsx        # 필터 컴포넌트
│   ├── ReviewDetail.tsx         # 리뷰 상세 뷰
│   ├── ResponseEditor.tsx       # 응답 에디터
│   ├── AIResponseOptions.tsx    # AI 옵션 설정
│   ├── ReviewAnalytics.tsx      # 분석 차트들
│   └── BulkActions.tsx          # 일괄 작업 바
└── hooks/
    ├── useReviews.ts            # 리뷰 목록 훅
    ├── useReviewDetail.ts       # 리뷰 상세 훅
    └── useReviewAnalytics.ts    # 분석 데이터 훅
```
