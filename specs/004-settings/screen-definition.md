# Settings - 화면 정의서

**Feature**: Settings (설정)
**Version**: 1.0
**Created**: 2025-12-21
**Status**: Draft

---

## 1. 화면 개요

### 1.1 화면 목적
사용자 프로필, 샵 정보, 플랫폼 연동, 알림 설정 등 SalonMate 서비스의 전반적인 설정을 관리하는 화면.

### 1.2 접근 경로
- **URL**: `/dashboard/settings`
- **Navigation**: 사이드바 "설정" 메뉴
- **권한**: 인증된 사용자

### 1.3 화면 목록
| 화면 ID | 화면명 | URL | 설명 |
|---------|--------|-----|------|
| ST-001 | 프로필 설정 | `/dashboard/settings` | 사용자 프로필 관리 |
| ST-002 | 샵 관리 | `/dashboard/settings/shops` | 샵 정보 관리 |
| ST-003 | 플랫폼 연동 | `/dashboard/settings/integrations` | 외부 서비스 연결 |
| ST-004 | 알림 설정 | `/dashboard/settings/notifications` | 알림 환경 설정 |
| ST-005 | 구독 및 결제 | `/dashboard/settings/billing` | 요금제 관리 |
| ST-006 | 팀 관리 | `/dashboard/settings/team` | 팀원 초대 및 권한 |

---

## 2. Settings Layout

### 2.1 전체 구조
```
┌─────────────────────────────────────────────────────────────┐
│ 설정                                                        │
├──────────────┬──────────────────────────────────────────────┤
│ Navigation   │ Content Area                                 │
│              │                                              │
│ 프로필       │  ┌────────────────────────────────────────┐  │
│ 샵 관리      │  │                                        │  │
│ 플랫폼 연동  │  │        (각 설정 페이지 내용)           │  │
│ 알림 설정    │  │                                        │  │
│ 구독 및 결제 │  │                                        │  │
│ 팀 관리      │  │                                        │  │
│              │  └────────────────────────────────────────┘  │
│ ──────────── │                                              │
│ 로그아웃     │                                              │
└──────────────┴──────────────────────────────────────────────┘
```

### 2.2 Navigation Menu
| 메뉴 | 아이콘 | URL |
|------|--------|-----|
| 프로필 | User | `/dashboard/settings` |
| 샵 관리 | Store | `/dashboard/settings/shops` |
| 플랫폼 연동 | Link | `/dashboard/settings/integrations` |
| 알림 설정 | Bell | `/dashboard/settings/notifications` |
| 구독 및 결제 | CreditCard | `/dashboard/settings/billing` |
| 팀 관리 | Users | `/dashboard/settings/team` |
| 로그아웃 | LogOut | - (액션) |

---

## 3. ST-001: 프로필 설정 화면

### 3.1 화면 구조
```
┌─────────────────────────────────────────────────────────────┐
│ 프로필 설정                                                  │
│ 개인 정보와 계정 설정을 관리합니다                            │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 프로필 사진                                              │ │
│ │ ┌──────┐                                                │ │
│ │ │      │  [사진 변경]  [삭제]                           │ │
│ │ │ 👤  │                                                │ │
│ │ └──────┘                                                │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 기본 정보                                                │ │
│ │                                                          │ │
│ │ 이름                                                     │ │
│ │ ┌────────────────────────────────────────────────────┐  │ │
│ │ │ 홍길동                                              │  │ │
│ │ └────────────────────────────────────────────────────┘  │ │
│ │                                                          │ │
│ │ 이메일                                                   │ │
│ │ ┌────────────────────────────────────────────────────┐  │ │
│ │ │ hong@example.com                         [인증됨 ✓] │  │ │
│ │ └────────────────────────────────────────────────────┘  │ │
│ │                                                          │ │
│ │ 전화번호                                                 │ │
│ │ ┌────────────────────────────────────────────────────┐  │ │
│ │ │ 010-1234-5678                                       │  │ │
│ │ └────────────────────────────────────────────────────┘  │ │
│ │                                                          │ │
│ │                              [변경사항 저장]             │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 보안                                                     │ │
│ │                                                          │ │
│ │ 비밀번호 변경                         [변경하기 →]       │ │
│ │ 2단계 인증                            [설정하기 →]       │ │
│ │ 로그인 기록                           [확인하기 →]       │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 계정 삭제                                    [탈퇴하기] │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 Profile Photo Section
| 기능 | 설명 |
|------|------|
| 사진 표시 | 원형 아바타 (120x120px) |
| 사진 변경 | 파일 선택 + 크롭 |
| 삭제 | 기본 아바타로 변경 |
| 지원 형식 | JPG, PNG (최대 5MB) |

### 3.3 Basic Info Form
| 필드 | 타입 | 필수 | 유효성 검사 |
|------|------|------|-------------|
| 이름 | Input | ✓ | 2-50자 |
| 이메일 | Input (disabled) | ✓ | 이메일 형식 |
| 전화번호 | Input | - | 휴대폰 번호 형식 |

### 3.4 Security Section
| 항목 | 설명 | 액션 |
|------|------|------|
| 비밀번호 변경 | 현재 → 새 비밀번호 | Modal |
| 2단계 인증 | TOTP 기반 2FA | 설정 페이지 |
| 로그인 기록 | 최근 접속 기록 | 목록 페이지 |

### 3.5 Danger Zone
| 액션 | 설명 | 확인 절차 |
|------|------|-----------|
| 계정 탈퇴 | 모든 데이터 삭제 | 비밀번호 + "탈퇴" 입력 |

---

## 4. ST-002: 샵 관리 화면

### 4.1 화면 구조
```
┌─────────────────────────────────────────────────────────────┐
│ 샵 관리                                    [+ 새 샵 추가]   │
│ 내 샵들을 관리합니다                                        │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 🏪 아름다운 미용실 (대표)                    [관리 →]   │ │
│ │    서울 강남구 역삼동 123-45                            │ │
│ │    ✓ 리뷰 연동  ✓ Instagram 연동                       │ │
│ ├─────────────────────────────────────────────────────────┤ │
│ │ 🏪 아름다운 미용실 2호점                     [관리 →]   │ │
│ │    서울 서초구 서초동 456-78                            │ │
│ │    ✓ 리뷰 연동  ○ Instagram 미연동                     │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 Shop Detail Modal/Page
```
┌─────────────────────────────────────────────────────────────┐
│ 샵 정보 수정                                         [저장] │
├─────────────────────────────────────────────────────────────┤
│ 기본 정보                                                   │
│                                                             │
│ 샵 이름                                                     │
│ ┌───────────────────────────────────────────────────────┐  │
│ │ 아름다운 미용실                                        │  │
│ └───────────────────────────────────────────────────────┘  │
│                                                             │
│ 업종                                                        │
│ ┌───────────────────────────────────────────────────────┐  │
│ │ 미용실 ▼                                               │  │
│ └───────────────────────────────────────────────────────┘  │
│                                                             │
│ 주소                                                        │
│ ┌───────────────────────────────────────────────────────┐  │
│ │ 서울 강남구 역삼동 123-45                              │  │
│ └───────────────────────────────────────────────────────┘  │
│                                                             │
│ 전화번호                                                    │
│ ┌───────────────────────────────────────────────────────┐  │
│ │ 02-1234-5678                                           │  │
│ └───────────────────────────────────────────────────────┘  │
│                                                             │
│ 영업시간                                                    │
│ ┌───────────────────────────────────────────────────────┐  │
│ │ 월-금: 10:00-20:00 | 토: 10:00-18:00 | 일: 휴무       │  │
│ └───────────────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────────┤
│ 연동 상태                                                   │
│                                                             │
│ Google 리뷰        ✓ 연동됨          [연결 해제]           │
│ Naver 리뷰         ✓ 연동됨          [연결 해제]           │
│ Instagram          ○ 미연동          [연동하기]            │
├─────────────────────────────────────────────────────────────┤
│ 위험 영역                                                   │
│                                                             │
│ 샵 삭제            모든 데이터가 삭제됩니다    [삭제하기]   │
└─────────────────────────────────────────────────────────────┘
```

### 4.3 Shop Form Fields
| 필드 | 타입 | 필수 | 설명 |
|------|------|------|------|
| 샵 이름 | Input | ✓ | 2-100자 |
| 업종 | Select | ✓ | 미용실, 네일샵, 피부관리 등 |
| 주소 | Address Input | ✓ | 주소 검색 API 연동 |
| 전화번호 | Input | - | 매장 전화번호 |
| 영업시간 | Time Picker | - | 요일별 설정 |
| 로고 | Image Upload | - | 샵 로고 이미지 |

---

## 5. ST-003: 플랫폼 연동 화면

### 5.1 화면 구조
```
┌─────────────────────────────────────────────────────────────┐
│ 플랫폼 연동                                                  │
│ 외부 서비스와 연결하여 자동으로 데이터를 동기화합니다          │
├─────────────────────────────────────────────────────────────┤
│ 리뷰 플랫폼                                                  │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 🔵 Google 리뷰                                          │ │
│ │    비즈니스 프로필과 연결하여 리뷰를 자동 수집합니다      │ │
│ │    ✓ 연결됨 · 마지막 동기화: 5분 전         [관리 →]    │ │
│ ├─────────────────────────────────────────────────────────┤ │
│ │ 🟢 Naver 플레이스                                       │ │
│ │    네이버 플레이스 리뷰를 자동 수집합니다                 │ │
│ │    ○ 연결 안됨                              [연결하기]   │ │
│ ├─────────────────────────────────────────────────────────┤ │
│ │ 🟡 카카오맵                                             │ │
│ │    카카오맵 리뷰를 자동 수집합니다                        │ │
│ │    ○ 연결 안됨                              [연결하기]   │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 소셜 미디어                                                  │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 📸 Instagram                                            │ │
│ │    Instagram 비즈니스 계정과 연결하여 콘텐츠를 발행합니다  │ │
│ │    ✓ 연결됨 · @beautiful_salon           [관리 →]       │ │
│ ├─────────────────────────────────────────────────────────┤ │
│ │ 📘 Facebook 페이지                                      │ │
│ │    Facebook 페이지와 연결합니다                          │ │
│ │    ○ 연결 안됨                              [연결하기]   │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ AI 서비스                                                   │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 🤖 OpenAI (GPT)                                         │ │
│ │    AI 응답 생성 및 콘텐츠 작성에 사용됩니다               │ │
│ │    ✓ 활성화됨 · API 키: sk-...xxxx       [설정 →]       │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 5.2 Platform Card States
| 상태 | 표시 | 액션 버튼 |
|------|------|-----------|
| 연결됨 | ✓ 연결됨 + 마지막 동기화 시간 | [관리] |
| 연결 안됨 | ○ 연결 안됨 | [연결하기] |
| 오류 | ⚠️ 연결 오류 | [재연결] |
| 동기화 중 | 🔄 동기화 중... | - |

### 5.3 Connection Flow

#### Google 리뷰 연동
1. [연결하기] 클릭
2. Google OAuth 로그인
3. 비즈니스 프로필 선택
4. 권한 동의
5. 연결 완료

#### Instagram 연동
1. [연결하기] 클릭
2. Facebook 로그인
3. 비즈니스 계정 선택
4. Instagram 계정 연결
5. 권한 동의
6. 연결 완료

### 5.4 Platform Settings Modal
```
┌─────────────────────────────────────────────────────────────┐
│ Google 리뷰 설정                                     [저장] │
├─────────────────────────────────────────────────────────────┤
│ 연결된 비즈니스                                             │
│ 아름다운 미용실 · 서울 강남구                               │
│                                                             │
│ 동기화 설정                                                 │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 자동 동기화 주기                                        │ │
│ │ ● 15분마다  ○ 1시간마다  ○ 수동                        │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 알림 설정                                                   │
│ [✓] 새 리뷰 알림 받기                                      │
│ [✓] 부정적 리뷰 (3점 이하) 즉시 알림                       │
│                                                             │
│ 마지막 동기화: 2025-12-21 10:30:00                         │
│                                    [지금 동기화] [연결 해제] │
└─────────────────────────────────────────────────────────────┘
```

---

## 6. ST-004: 알림 설정 화면

### 6.1 화면 구조
```
┌─────────────────────────────────────────────────────────────┐
│ 알림 설정                                                    │
│ 알림 수신 방법과 유형을 설정합니다                            │
├─────────────────────────────────────────────────────────────┤
│ 알림 채널                                                    │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 📧 이메일 알림                              [ON ●    ] │ │
│ │    hong@example.com                                     │ │
│ ├─────────────────────────────────────────────────────────┤ │
│ │ 📱 푸시 알림                                [   ● ON ] │ │
│ │    브라우저/앱 푸시 알림                                 │ │
│ ├─────────────────────────────────────────────────────────┤ │
│ │ 💬 카카오톡 알림                            [ON ●    ] │ │
│ │    010-1234-5678                                        │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 알림 유형                                                    │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │                           이메일  푸시  카카오          │ │
│ │ 새 리뷰 알림               [✓]    [✓]    [✓]           │ │
│ │ 부정적 리뷰 (3점 이하)     [✓]    [✓]    [✓]           │ │
│ │ 리뷰 응답 완료             [✓]    [ ]    [ ]           │ │
│ │ 포스트 발행 완료           [✓]    [✓]    [ ]           │ │
│ │ 포스트 발행 실패           [✓]    [✓]    [✓]           │ │
│ │ 주간 리포트                [✓]    [ ]    [ ]           │ │
│ │ 월간 리포트                [✓]    [ ]    [ ]           │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 방해 금지 시간                                               │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ [✓] 방해 금지 시간 설정                                 │ │
│ │     22:00 부터 08:00 까지 알림을 받지 않습니다           │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│                                        [변경사항 저장]       │
└─────────────────────────────────────────────────────────────┘
```

### 6.2 Notification Types
| 알림 유형 | 설명 | 기본값 |
|-----------|------|--------|
| 새 리뷰 | 새로운 리뷰 수신 시 | 모두 ON |
| 부정적 리뷰 | 3점 이하 리뷰 | 모두 ON |
| 리뷰 응답 완료 | AI/직접 응답 게시 완료 | 이메일만 |
| 포스트 발행 완료 | 예약 포스트 발행 성공 | 이메일, 푸시 |
| 포스트 발행 실패 | 포스트 발행 실패 | 모두 ON |
| 주간 리포트 | 주간 성과 요약 | 이메일만 |
| 월간 리포트 | 월간 성과 요약 | 이메일만 |

---

## 7. ST-005: 구독 및 결제 화면

### 7.1 화면 구조
```
┌─────────────────────────────────────────────────────────────┐
│ 구독 및 결제                                                 │
│ 요금제와 결제 정보를 관리합니다                              │
├─────────────────────────────────────────────────────────────┤
│ 현재 플랜                                                    │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 🌟 Pro 플랜                                              │ │
│ │                                                          │ │
│ │ ₩49,000 / 월                                             │ │
│ │ 다음 결제일: 2026년 1월 21일                              │ │
│ │                                                          │ │
│ │ 포함 기능:                                                │ │
│ │ ✓ 무제한 리뷰 관리    ✓ AI 응답 500회/월                  │ │
│ │ ✓ 무제한 포스트 예약  ✓ 팀원 3명                          │ │
│ │ ✓ 분석 리포트         ✓ 우선 지원                         │ │
│ │                                                          │ │
│ │                    [플랜 변경]  [구독 취소]               │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 사용량                                                       │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ AI 응답 생성   ████████████████░░░░  320 / 500회        │ │
│ │ 팀원 수        ██████░░░░░░░░░░░░░░  2 / 3명            │ │
│ │ 샵 수          ██████████░░░░░░░░░░  2 / 무제한         │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 결제 수단                                                    │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 💳 **** **** **** 1234                       [변경하기] │ │
│ │    Visa · 만료 12/27                                    │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 결제 내역                                                    │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 2025-12-21  Pro 플랜 (월간)  ₩49,000  완료  [영수증]    │ │
│ │ 2025-11-21  Pro 플랜 (월간)  ₩49,000  완료  [영수증]    │ │
│ │ 2025-10-21  Pro 플랜 (월간)  ₩49,000  완료  [영수증]    │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 7.2 Plan Comparison Modal
| 기능 | Free | Pro | Enterprise |
|------|------|-----|------------|
| 가격 | ₩0 | ₩49,000/월 | 문의 |
| 리뷰 관리 | 100개/월 | 무제한 | 무제한 |
| AI 응답 | 10회/월 | 500회/월 | 무제한 |
| 포스트 예약 | 5개/월 | 무제한 | 무제한 |
| 팀원 수 | 1명 | 3명 | 무제한 |
| 분석 리포트 | 기본 | 상세 | 커스텀 |
| 지원 | 이메일 | 우선 | 전담 |

---

## 8. ST-006: 팀 관리 화면

### 8.1 화면 구조
```
┌─────────────────────────────────────────────────────────────┐
│ 팀 관리                                   [+ 팀원 초대]      │
│ 팀원을 초대하고 권한을 관리합니다                            │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 👤 홍길동 (나)                             소유자        │ │
│ │    hong@example.com                                     │ │
│ ├─────────────────────────────────────────────────────────┤ │
│ │ 👤 김영희                                  관리자  [⋯]  │ │
│ │    kim@example.com                                      │ │
│ ├─────────────────────────────────────────────────────────┤ │
│ │ 👤 이철수                                  직원    [⋯]  │ │
│ │    lee@example.com                                      │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 초대 대기 중                                                 │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ ✉️ park@example.com                 2025-12-20 초대됨   │ │
│ │    직원 권한                      [다시 보내기] [취소]  │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 팀원 2/3명 (Pro 플랜)                      [플랜 업그레이드] │
└─────────────────────────────────────────────────────────────┘
```

### 8.2 Team Member Roles
| 역할 | 설명 | 권한 |
|------|------|------|
| 소유자 | 계정 소유자 | 모든 권한 + 결제 |
| 관리자 | 샵 관리자 | 설정 제외 모든 권한 |
| 직원 | 일반 직원 | 리뷰/포스트 관리 |

### 8.3 Invite Modal
```
┌─────────────────────────────────────────────────────────────┐
│ 팀원 초대                                                    │
├─────────────────────────────────────────────────────────────┤
│ 이메일                                                       │
│ ┌───────────────────────────────────────────────────────┐  │
│ │ example@email.com                                      │  │
│ └───────────────────────────────────────────────────────┘  │
│                                                             │
│ 역할                                                        │
│ ○ 관리자 - 대부분의 설정 변경 가능                          │
│ ● 직원   - 리뷰 및 포스트 관리만 가능                       │
│                                                             │
│ 샵 접근 권한                                                 │
│ [✓] 아름다운 미용실                                         │
│ [ ] 아름다운 미용실 2호점                                    │
│                                                             │
│                              [취소]  [초대 보내기]           │
└─────────────────────────────────────────────────────────────┘
```

---

## 9. API 연동

### 9.1 Endpoints

| 기능 | Method | Endpoint |
|------|--------|----------|
| 프로필 조회 | GET | `/api/v1/users/me` |
| 프로필 수정 | PUT | `/api/v1/users/me` |
| 비밀번호 변경 | POST | `/api/v1/users/me/password` |
| 샵 목록 | GET | `/api/v1/users/me/shops` |
| 샵 상세 | GET | `/api/v1/shops/{shopId}` |
| 샵 수정 | PUT | `/api/v1/shops/{shopId}` |
| 샵 삭제 | DELETE | `/api/v1/shops/{shopId}` |
| 연동 목록 | GET | `/api/v1/shops/{shopId}/integrations` |
| 연동 연결 | POST | `/api/v1/integrations/{platform}/connect` |
| 연동 해제 | DELETE | `/api/v1/integrations/{integrationId}` |
| 알림 설정 조회 | GET | `/api/v1/users/me/notification-settings` |
| 알림 설정 수정 | PUT | `/api/v1/users/me/notification-settings` |
| 구독 조회 | GET | `/api/v1/users/me/subscription` |
| 플랜 변경 | POST | `/api/v1/subscriptions/change-plan` |
| 팀원 목록 | GET | `/api/v1/teams/members` |
| 팀원 초대 | POST | `/api/v1/teams/invite` |
| 팀원 권한 수정 | PUT | `/api/v1/teams/members/{memberId}` |
| 팀원 삭제 | DELETE | `/api/v1/teams/members/{memberId}` |

---

## 10. 파일 구조

```
src/frontend/src/app/dashboard/settings/
├── page.tsx                     # 프로필 설정 (기본)
├── layout.tsx                   # 설정 레이아웃 (사이드 네비게이션)
├── shops/
│   └── page.tsx                 # 샵 관리
├── integrations/
│   └── page.tsx                 # 플랫폼 연동
├── notifications/
│   └── page.tsx                 # 알림 설정
├── billing/
│   └── page.tsx                 # 구독 및 결제
├── team/
│   └── page.tsx                 # 팀 관리
├── components/
│   ├── SettingsNav.tsx          # 설정 네비게이션
│   ├── ProfileForm.tsx          # 프로필 폼
│   ├── ShopCard.tsx             # 샵 카드
│   ├── ShopForm.tsx             # 샵 편집 폼
│   ├── IntegrationCard.tsx      # 연동 카드
│   ├── NotificationMatrix.tsx   # 알림 설정 매트릭스
│   ├── PlanCard.tsx             # 요금제 카드
│   ├── UsageBar.tsx             # 사용량 바
│   ├── TeamMemberCard.tsx       # 팀원 카드
│   └── InviteModal.tsx          # 초대 모달
└── hooks/
    ├── useProfile.ts            # 프로필 관리
    ├── useShops.ts              # 샵 관리
    ├── useIntegrations.ts       # 연동 관리
    ├── useNotifications.ts      # 알림 설정
    ├── useSubscription.ts       # 구독 관리
    └── useTeam.ts               # 팀 관리
```
